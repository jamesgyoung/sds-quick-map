<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <script>
            const basePath = window.location.hostname === 'localhost' ? '' : '/sds-quick-map';
            document.write('<link href="' + basePath + '/assets/css/main.css" rel="stylesheet">');
            document.write('<script src="' + basePath + '/config/site-config.js"><\/script>');
            document.write('<script src="' + basePath + '/assets/js/gdal3.js/gdal3.js"><\/script>');
            document.write('<script src="' + basePath + '/assets/js/d3/d3.min.js"><\/script>');
        </script>
    </head>
    <body>
        <div id="header-container"></div>
        <script>
            fetch(`${basePath}/components/header/`)
                .then(response => response.text())
                .then(data => {
                    const fragment = document
                        .createRange()
                        .createContextualFragment(data);
                    document
                        .getElementById('header-container')
                        .appendChild(fragment);
                });
        </script>

        <div class="govuk-width-container">
            <main class="govuk-main-wrapper" id="main-content" role="main">
                
<script type="module">
  //import { initAll } from '/dist/govuk/govuk-frontend.min.js'
  //initAll()
  import { FileUpload } from './node_modules/govuk-frontend/dist/govuk/govuk-frontend.min.js'
  const fileUploads = document.querySelectorAll('[data-module="govuk-file-upload"]')
  fileUploads.forEach(fileUpload => {
    new FileUpload(fileUpload)
  })
</script>

<body class="govuk-frontend-supported">
<div class="govuk-form-group">
  <label class="govuk-label g" for="file-upload-1">
    <h1 class="govuk-heading-l">Upload a geospatial file</h1>
  </label>
  <div
    class="govuk-drop-zone"
    data-module="govuk-file-upload">
    <input class="govuk-file-upload" id="file-upload-1" name="fileUpload1" type="file" multiple accept=".gpkg,.geojson,.json,.kml,.shp,.shx,.dbf,.prj,.sbn,.sbx,.fbn,.fbx,.ain,.aih,.atx,.ixs,.mxs,.xml,.cpg">
  </div>
</div>

<div class="govuk-form-group">
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
      <h1 class="govuk-fieldset__heading">
        Figure Size
      </h1>
    </legend>
    <div class="govuk-radios" data-module="govuk-radios">
      <div class="govuk-radios__item">
        <input class="govuk-radios__input" id="figure-size-a3" name="figureSize" type="radio" value="a3">
        <label class="govuk-label govuk-radios__label" for="figure-size-a3">
          A3
        </label>
      </div>
      <div class="govuk-radios__item">
        <input class="govuk-radios__input" id="figure-size-a4" name="figureSize" type="radio" value="a4">
        <label class="govuk-label govuk-radios__label" for="figure-size-a4">
          A4
        </label>
      </div>
      <div class="govuk-radios__item">
        <input class="govuk-radios__input" id="figure-size-a5" name="figureSize" type="radio" value="a5">
        <label class="govuk-label govuk-radios__label" for="figure-size-a5">
          A5
        </label>
      </div>
    </div>
  </fieldset>
</div>


<fieldset class="govuk-fieldset">
  <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
    <h1 class="govuk-fieldset__heading">
      Figure details
    </h1>
  </legend>
  <div class="govuk-form-group">
    <label class="govuk-label" for="figure-title">
      Title:
    </label>
    <input class="govuk-input" id="figure-title" name="figureTitle" type="text">
  </div>
  <div class="govuk-form-group">
    <label class="govuk-label" for="attribution-statement">
      Attribution statement:
    </label>
    <input class="govuk-input" id="attribution-statement" name="attributionStatement" type="text">
  </div>
</fieldset>

<button type="button" data-prevent-double-click="true" class="govuk-button" data-module="govuk-button" id="generate-figure">
  Generate figure
</button>

<div id="canvas-container" class="govuk-!-margin-top-4" style="display: none;">
  <canvas id="map-canvas"></canvas>
</div>

<div class="govuk-button-group" id="download-buttons" style="display: none;">
  <button type="button" class="govuk-button" data-module="govuk-button" id="download-png">
    Download PNG
  </button>
  <button type="button" class="govuk-button" data-module="govuk-button" id="download-jpeg">
    Download JPEG
  </button>
</div>

<script type="module" src="assets/js/map.js"></script>

</body>
            </main>
        </div>

        <div id="footer-container"></div>

        <script>
            fetch(`${basePath}/components/footer/`)
                .then(response => response.text())
                .then(data => {
                    //    document.getElementById('footer-container').innerHTML = data;
                    const fragment = document
                        .createRange()
                        .createContextualFragment(data);
                    document
                        .getElementById('footer-container')
                        .appendChild(fragment);
                });
        </script>
    </body>
</html>